<!DOCTYPE html>
<html lang="en" >
<th:block th:replace="~{/layout/basic :: setContent(~{this::content})}">
  <th:block th:fragment="content">
    <h1 class = "mt-4">Movie Register Page</h1>

    <form th:action="@{/movie/register}" th:method="post">
      <div class="form-group">
        <label>Title</label>
        <input type="text" class="form-control" name="title" placeholder="Enter Title">
      </div>

      <div class="form-group fileForm">
        <label>Image Files</label>
        <div class="custom-file">
          <input type="file" class="custom-file-input">
          <label class="custom-file-label" data-browse="Browse"></label>
        </div>
      </div>

      <button type="submit" class="btn btn-primary">Submit</button>
    </form>

    <script>
      $(document).ready(function(e) {
        let regex = new RegExp("(.*?)\.(exe|sh|zip|alz|tiff)$");
        let maxSize = 10485760;

        function checkExtension(fileName, fileSize) {
          if(fileSize >= maxSize) {
            alert("파일 사이즈 초과")
            return false;
          }

          if(regex.text(fileName)) {
            alert("해당 종류의 파일은 업로드할 수 없습니다");
            return false;
          }

          return true;
        }

        $(".custom-file-input").on("change", function() {
          let fileName = $(this).val().split("\\").pop();
          $(this).siblings(".custom-file-label").addClass("selected").html(fileName);

          let formData = new FormData();
          let inputFile = $(this);
          let files = inputFile[0].files;
          let appended = false;

          for(let i = 0; i < files.length; i++) {

          }
        })
      })
    </script>
  </th:block>
</th:block>